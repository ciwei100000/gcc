git diff d48720ca19879ce3a08da42f3a8ef620a23baa46 86eae1b41db747ad588e396bdb15697e009cd83e

diffgcc/gm2/ChangeLog b/gcc-versionno/gcc/gm2/ChangeLog
index 6d6b8ec8..c27920ee 100644
--- a/src/gcc/gm2/ChangeLog
+++ b/src/gcc/gm2/ChangeLog
@@ -1,3 +1,12 @@
+2019-11-04      Gaius Mulley <gaius.mulley@southwales.ac.uk>
+
+	* gm2/Make-lang.in:  (gm2.all.cross) added
+          plugin/m2rte$(exeext).so as a dependency.
+	* gm2/gm2-libs/config-host.in:  (AC_CHECK_HEADERS)
+          quote all header files.
+	* gm2/Make-lang.in:  (gm2.all.cross) added
+          $(GM2_LINK_TOOLS) as dependencies.
+
 2019-10-30      Gaius Mulley <gaius.mulley@southwales.ac.uk>
 
 	* gm2/Make-lang.in:  pruned old comments.  (GM2_DIRS)
diffgcc/gm2/Make-lang.in b/gcc-versionno/gcc/gm2/Make-lang.in
index 8c7a9b5a..8acb1d66 100644
--- a/src/gcc/gm2/Make-lang.in
+++ b/src/gcc/gm2/Make-lang.in
@@ -156,7 +156,7 @@ GM2_LIB_DIR_MIN= $(DESTDIR)$(libsubdir)/gm2/min
 
 # Build hooks:
 
-gm2.all.cross: xgm2-cross$(exeext)
+gm2.all.cross: xgm2-cross$(exeext) plugin/m2rte$(exeext).so $(GM2_LINK_TOOLS)
 
 gm2.start.encap: xgm2$(exeext) plugin/m2rte$(exeext).so $(GM2_LINK_TOOLS)
 gm2.rest.encap:
diffgcc/gm2/gm2-libs/config-host.in b/gcc-versionno/gcc/gm2/gm2-libs/config-host.in
index 1a3fea29..dd6d413c 100644
--- a/src/gcc/gm2/gm2-libs/config-host.in
+++ b/src/gcc/gm2/gm2-libs/config-host.in
@@ -33,14 +33,14 @@ AC_HEADER_SYS_WAIT
 AC_CHECK_HEADER([math.h],
 	       [AC_DEFINE([HAVE_MATH_H], [1], [have math.h])])
 
-AC_CHECK_HEADERS(limits.h stddef.h string.h strings.h stdlib.h \
-                 time.h \
-		 fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \
-		 sys/resource.h sys/param.h sys/times.h sys/stat.h \
-                 sys/wait.h sys/ioctl.h errno.h sys/errno.h \
-		 pwd.h direct.h dirent.h signal.h malloc.h langinfo.h \
-                 pthread.h stdarg.h stdio.h sys/types.h termios.h \
-                 netinet/in.h netdb.h)
+AC_CHECK_HEADERS([limits.h stddef.h string.h strings.h stdlib.h \
+		  time.h \
+		  fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \
+		  sys/resource.h sys/param.h sys/times.h sys/stat.h \
+                  sys/wait.h sys/ioctl.h errno.h sys/errno.h \
+		  pwd.h direct.h dirent.h signal.h malloc.h langinfo.h \
+                  pthread.h stdarg.h stdio.h sys/types.h termios.h \
+                  netinet/in.h netdb.h])
 
 # Checks for typedefs, structures, and compiler characteristics.
 
difflibgm2/ChangeLog b/gcc-versionno/libgm2/ChangeLog
index e8c95018..899d3868 100644
--- a/src/libgm2/ChangeLog
+++ b/src/libgm2/ChangeLog
@@ -1,3 +1,20 @@
+2019-11-04      Gaius Mulley <gaius.mulley@southwales.ac.uk>
+
+	* libgm2/libcor/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/libiso/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/libpim/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/liblog/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/libmin/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/libulm/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/libpth/Makefile.am: (MULTIOSSUBDIR) quote test.
+	* libgm2/libcor/Makefile.in: regenerated.
+	* libgm2/libiso/Makefile.in: regenerated.
+	* libgm2/libpim/Makefile.in: regenerated.
+	* libgm2/liblog/Makefile.in: regenerated.
+	* libgm2/libmin/Makefile.in: regenerated.
+	* libgm2/libulm/Makefile.in: regenerated.
+	* libgm2/libpth/Makefile.in: regenerated.
+
 2019-07-10      Gaius Mulley <gaius.mulley@southwales.ac.uk>
 
 	* libgm2/Makefile.am:  use $(MAKE) rather than make.
difflibgm2/libcor/Makefile.am b/gcc-versionno/libgm2/libcor/Makefile.am
index bc88e133..2f93e9bb 100644
--- a/src/libgm2/libcor/Makefile.am
+++ b/src/libgm2/libcor/Makefile.am
@@ -21,7 +21,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libcor/Makefile.in b/gcc-versionno/libgm2/libcor/Makefile.in
index 8087d755..6677427f 100644
--- a/src/libgm2/libcor/Makefile.in
+++ b/src/libgm2/libcor/Makefile.in
@@ -383,7 +383,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libiso/Makefile.am b/gcc-versionno/libgm2/libiso/Makefile.am
index d83aff59..1a6d2f38 100644
--- a/src/libgm2/libiso/Makefile.am
+++ b/src/libgm2/libiso/Makefile.am
@@ -21,7 +21,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libiso/Makefile.in b/gcc-versionno/libgm2/libiso/Makefile.in
index 84498d13..b7a26e8a 100644
--- a/src/libgm2/libiso/Makefile.in
+++ b/src/libgm2/libiso/Makefile.in
@@ -399,7 +399,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/liblog/Makefile.am b/gcc-versionno/libgm2/liblog/Makefile.am
index b4a86986..d503d4bc 100644
--- a/src/libgm2/liblog/Makefile.am
+++ b/src/libgm2/liblog/Makefile.am
@@ -21,7 +21,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/liblog/Makefile.in b/gcc-versionno/libgm2/liblog/Makefile.in
index 34902035..f8d6043f 100644
--- a/src/libgm2/liblog/Makefile.in
+++ b/src/libgm2/liblog/Makefile.in
@@ -388,7 +388,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libmin/Makefile.am b/gcc-versionno/libgm2/libmin/Makefile.am
index 6dd448b4..88846f38 100644
--- a/src/libgm2/libmin/Makefile.am
+++ b/src/libgm2/libmin/Makefile.am
@@ -21,7 +21,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libmin/Makefile.in b/gcc-versionno/libgm2/libmin/Makefile.in
index f9c2911c..faa9138e 100644
--- a/src/libgm2/libmin/Makefile.in
+++ b/src/libgm2/libmin/Makefile.in
@@ -386,7 +386,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libpim/Makefile.am b/gcc-versionno/libgm2/libpim/Makefile.am
index 2e576617..f1242204 100644
--- a/src/libgm2/libpim/Makefile.am
+++ b/src/libgm2/libpim/Makefile.am
@@ -21,7 +21,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libpim/Makefile.in b/gcc-versionno/libgm2/libpim/Makefile.in
index 1b3f3ddb..724ecfcc 100644
--- a/src/libgm2/libpim/Makefile.in
+++ b/src/libgm2/libpim/Makefile.in
@@ -395,7 +395,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libpth/Makefile.am b/gcc-versionno/libgm2/libpth/Makefile.am
index 3ef3ce75..9ce25975 100644
--- a/src/libgm2/libpth/Makefile.am
+++ b/src/libgm2/libpth/Makefile.am
@@ -22,7 +22,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libpth/Makefile.in b/gcc-versionno/libgm2/libpth/Makefile.in
index fd5afbfa..927cbdbe 100644
--- a/src/libgm2/libpth/Makefile.in
+++ b/src/libgm2/libpth/Makefile.in
@@ -307,7 +307,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libulm/Makefile.am b/gcc-versionno/libgm2/libulm/Makefile.am
index d4fa58ef..cd7fb47e 100644
--- a/src/libgm2/libulm/Makefile.am
+++ b/src/libgm2/libulm/Makefile.am
@@ -21,7 +21,7 @@ toolexecdir=@toolexecdir@
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
 
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
difflibgm2/libulm/Makefile.in b/gcc-versionno/libgm2/libulm/Makefile.in
index f3723567..79012b25 100644
--- a/src/libgm2/libulm/Makefile.in
+++ b/src/libgm2/libulm/Makefile.in
@@ -398,7 +398,7 @@ version := $(shell $(CC) -dumpversion)
 libsubdir = $(libdir)/gcc/$(host_noncanonical)/$(version)
 MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)
 MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)
-MULTIOSSUBDIR := $(shell if test $(MULTIOSDIR) != .; then echo /$(MULTIOSDIR); fi)
+MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)
 inst_libdir = $(libsubdir)$(MULTISUBDIR)
 inst_slibdir = $(slibdir)$(MULTIOSSUBDIR)
 
