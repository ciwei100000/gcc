--- a/src/gcc/config/gcn/gcn-hsa.h
+++ b/src/gcc/config/gcn/gcn-hsa.h
@@ -77,6 +77,7 @@ extern unsigned int gcn_local_sym_hash (
 
 /* Use LLVM assembler and linker options.  */
 #define ASM_SPEC  "-triple=amdgcn--amdhsa "	     \
+		  "-mattr=-code-object-v3 " \
 		  "%:last_arg(%{march=*:-mcpu=%*}) " \
 		  "-filetype=obj"
 /* Add -mlocal-symbol-id=<source-file-basename> unless the user (or mkoffload)
